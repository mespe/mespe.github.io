<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='This is the last part of the series, and if you have not read the other two parts(pt. 1,pt. 2), it might be helpful to glance back to see how I got here.
In the last part, I explained the thinking that led me to build my own workstation using reclaimed parts. Here is brief overview of what I did:
Note: this is not intended to be a build guide.'>

<meta property='og:title' content='Data science on the cheap - pt. 3 • Ten thousand words...'>
<meta property='og:description' content='This is the last part of the series, and if you have not read the other two parts(pt. 1,pt. 2), it might be helpful to glance back to see how I got here.
In the last part, I explained the thinking that led me to build my own workstation using reclaimed parts. Here is brief overview of what I did:
Note: this is not intended to be a build guide.'>
<meta property='og:url' content='https://mespe.github.io/post/cheap3/'>
<meta property='og:site_name' content='Ten thousand words...'>
<meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content=''><meta property='article:published_time' content='2017-10-28T16:33:23-07:00'/><meta property='article:modified_time' content='2017-10-28T16:33:23-07:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.31-DEV" />

  <title>Data science on the cheap - pt. 3 • Ten thousand words...</title>
  <link rel='canonical' href='https://mespe.github.io/post/cheap3/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Ubuntu:400,400i,700&subset=latin'>
<link rel='stylesheet' href='/assets/css/main.77da63e1.css'><link rel='stylesheet' href='/css/custom.css'>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-101069222-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>


<body class='page type-post'>
  <div class='site'>

    <a class='screen-reader' href='#main'>Skip to Content</a>

    <header id='header' class='header-container'>
      <div class='header site-header'>
        <nav id='main-menu' class='main-menu-container' aria-label='Main Menu'>
  <ul class='main-menu'>
  <li>
      <a href='/'>Home</a>
    </li>
  <li>
      <a href='/post/'>Blog</a>
    </li>
  <li>
      <a href='/about/'>About me</a>
    </li>
  <li>
      <a href='/research/'>Research</a>
    </li>
  <li>
      <a href='https://github.com/mespe'>Repos</a>
    </li>
  <li>
      <a href='/docs/espe_cv.pdf'>CV</a>
    </li>
  
  </ul>
</nav>

        <div class='header-info'>
          
          <p class='site-title title'>Ten thousand words...</p>
          
          <p class='site-description subtitle'>Thoughts on agriculture, data science, and academia</p>
        </div>
      </div>
    </header>


<main id='main' class='main'>
  <article lang='en' class='entry'>
    <header class='header-container'>
  <div class='header entry-header'>
    <div class='header-info'>
      <h1 class='title'>Data science on the cheap - pt. 3</h1>
      

    </div>
    
<div class='meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader'>Posted on </span>
  <time class='date' datetime='2017-10-28T16:33:23-07:00'>2017, Oct 28</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
6 mins read
</span>


</div>


  </div>
</header>

    
    

    <div class='entry-content'>
  

<p>This is the last part of the series, and if you have not read the
other two parts(<a href="/post/cheap_datasci/">pt. 1</a>,<a href="/post/cheap2/">pt. 2</a>),
it might be helpful to glance back to see how I got here.</p>

<p>In the last part, I explained the thinking that led me to build my own
workstation using reclaimed parts. Here is brief overview of what I
did:</p>

<p><em>Note: this is not intended to be a build guide. If you have no
experience assembling a computer system, please find a beginner&rsquo;s
guide for the basics.</em></p>

<h1 id="components">Components</h1>

<p>Before you run off to EBay to source components, it is worth taking a
moment to evaluate your expected workload, specifically to decide if
it will be CPU, memory, or I/O intensive. In an (overly) simple breakdown:</p>

<ul>
<li><p>CPU: These operations benefit from faster calculations, and (to
over simplify) benefit from higher clock speeds on the CPU. You
want to look for faster GHz ratings on the CPU.</p></li>

<li><p>Memory: These operations involve moving or altering lots of data,
and benefit from getting that data to and from the CPU
efficiently. You want to look for larger cache (L3) and more
memory bandwidth, more memory channels, etc.</p></li>

<li><p>I/O: These operations involve reading, writing, or moving data
around on the disk. You want to look for a system that can mount
several drives in RAID or over faster interfaces (e.g., PCIE).</p></li>
</ul>

<p>Again, there are tons of details in each of these, but taking a basic
inventory can help you focus your parts search.</p>

<p>In my case, modeling with Stan is heavily influenced by memory
bandwidth, but the models themselves do not typically use much memory
total. Therefore, I looked for CPUs with large L3 cache, quad-channel
memory, but was not terribly concerned about CPU clock speeds, core
count, or storage.</p>

<h1 id="my-build">My build</h1>

<p>I focused on a dual socket build, using LGA 2011 Xeon parts. Right
now, you can pick up some older CPUs off EBay for around $30 each,
each with 25 MB of L3 cache. Used ECC RAM costs around $1/GB, so for
around $100 you can easily get 32 cores, 32 GB RAM. Given the cost, I
figure if one part dies, it can be replaced for a low sum.</p>

<p>However, the difficulty is in the rest of the build. Server parts are
intended to be installed in servers, not workstations. Therefore,
finding a case, motherboard, PSU ended up being much more of a pain. I
found a dual socket LGA 2011 Intel workstation board for $200
refurbished, a case that could fit the EAXT (extended ATX) motherboard
for $80, and a power supply with the necessary connections to drive 2
CPUs (Seasonic 650 Gold unit) for an additional $90. You read that
right, almost all the other components cost as much as the CPU and
RAM, which are typically what people focus on. Additional parts that
were needed were CPU coolers and a SSD for the OS.</p>

<p>The total cost ended around $600.</p>

<h1 id="was-it-worth-it">Was it worth it?</h1>

<p>For this comparison, I have my daily-driver laptop (Lenovo T460s,
i5-6200U, 20GB RAM) which I purchased for ~$1k vs. the Chromebook
(Lenovo 11e) and workstation combo which cost $770.</p>

<h2 id="computing-power">Computing power</h2>

<p>Both the T460s and workstation are running Linux, hence UnixBench is
the nature benchmark to compare them.</p>

<h3 id="single-core">Single core</h3>

<p>First, the laptop:</p>

<pre>
System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   30919412.5   2649.5
Double-Precision Whetstone                       55.0       3944.4    717.2
Execl Throughput                                 43.0       3795.4    882.6
File Copy 1024 bufsize 2000 maxblocks          3960.0     979550.8   2473.6
File Copy 256 bufsize 500 maxblocks            1655.0     285555.7   1725.4
File Copy 4096 bufsize 8000 maxblocks          5800.0    2351617.0   4054.5
Pipe Throughput                               12440.0    1990267.8   1599.9
Pipe-based Context Switching                   4000.0     214263.3    535.7
Process Creation                                126.0      12805.6   1016.3
Shell Scripts (1 concurrent)                     42.4       4485.4   1057.9
Shell Scripts (8 concurrent)                      6.0       1337.2   2228.6
System Call Overhead                          15000.0    3544217.3   2362.8
                                                                   ========
System Benchmarks Index Score                                        1510.3
</pre>

<p>Not terrible. How did the $600 workstation with old parts do?</p>

<pre>
System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   30215728.7   2589.2
Double-Precision Whetstone                       55.0       3271.3    594.8
Execl Throughput                                 43.0       2049.2    476.6
File Copy 1024 bufsize 2000 maxblocks          3960.0    1040357.0   2627.2
File Copy 256 bufsize 500 maxblocks            1655.0     285077.5   1722.5
File Copy 4096 bufsize 8000 maxblocks          5800.0    2856997.8   4925.9
Pipe Throughput                               12440.0    2147832.0   1726.6
Pipe-based Context Switching                   4000.0     167883.1    419.7
Process Creation                                126.0       4187.3    332.3
Shell Scripts (1 concurrent)                     42.4       2245.3    529.6
Shell Scripts (8 concurrent)                      6.0       2451.3   4085.5
System Call Overhead                          15000.0    3600961.8   2400.6
                                                                   ========
System Benchmarks Index Score                                        1286.0
</pre>

<p>So, the laptop actually has better single core performance. This is
not terribly surprising, since the laptop CPU is newer and has a
higher clock.</p>

<h3 id="multicore">Multicore</h3>

<p>Again, first the laptop:</p>

<pre>
System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   77912721.6   6676.3
Double-Precision Whetstone                       55.0      13699.1   2490.7
Execl Throughput                                 43.0      15577.6   3622.7
File Copy 1024 bufsize 2000 maxblocks          3960.0     949210.3   2397.0
File Copy 256 bufsize 500 maxblocks            1655.0     264511.2   1598.3
File Copy 4096 bufsize 8000 maxblocks          5800.0    2902041.8   5003.5
Pipe Throughput                               12440.0    5488727.9   4412.2
Pipe-based Context Switching                   4000.0     933827.9   2334.6
Process Creation                                126.0      33959.7   2695.2
Shell Scripts (1 concurrent)                     42.4      10576.1   2494.4
Shell Scripts (8 concurrent)                      6.0       1571.4   2619.0
System Call Overhead                          15000.0    8306589.9   5537.7
                                                                   ========
System Benchmarks Index Score                                        3201.6
</pre>

<p>And now the workstation:</p>

<pre>
System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0  456986583.3  39159.1
Double-Precision Whetstone                       55.0      76894.4  13980.8
Execl Throughput                                 43.0      35217.6   8190.1
File Copy 1024 bufsize 2000 maxblocks          3960.0     721736.4   1822.6
File Copy 256 bufsize 500 maxblocks            1655.0     203074.8   1227.0
File Copy 4096 bufsize 8000 maxblocks          5800.0    2356368.2   4062.7
Pipe Throughput                               12440.0   33687117.5  27079.7
Pipe-based Context Switching                   4000.0    5822845.2  14557.1
Process Creation                                126.0      84757.5   6726.8
Shell Scripts (1 concurrent)                     42.4      61021.9  14392.0
Shell Scripts (8 concurrent)                      6.0       8808.9  14681.5
System Call Overhead                          15000.0    4232309.4   2821.5
                                                                   ========
System Benchmarks Index Score                                        7956.9
</pre>

<p>This is really where the workstation shines - notice that the
benchmark is only running on 8 cores concurrently.</p>

<h2 id="benchmarks-vs-real-world-use">Benchmarks vs. real-world use</h2>

<p>The workstation crunches on large Stan models without even breaking a
sweat, even across 16 cores. Due to the memory bandwidth, even simple
models are faster on the workstation compared to the laptop. I want to
try some other computations at it (crop models, etc.), and I want to
throw some GPUs in it for Machine Learning (it has 4 PCIE slots!). Until then,
I can confidentially say that it out-performs any other $600 system I
have seen.</p>

<p><em>One (important) thing to consider - I am not accounting for
 energy use here. The electricity needed to run the workstation and
 cool the room it is in should be taken into consideration.</em></p>

<h1 id="so-what-is-the-verdict">So, what is the verdict?</h1>

<p>The Chromebook is surprisingly nice for day-to-day cruising the web,
answering emails, etc. When it comes to writing code, it is OK once
set up (though the setup is not always fun). It is not great for
actually running analyses, but the workstation helps patch up that
deficiency.</p>

<p>I think if I only had ~$800 to spend, I would lean towards the
Chromebook + workstation set up. But the limitations of the Chromebook
when it comes to actually compiling code and/or running an analysis
can be frustrating. While things might change, Chromebooks just are
not intended for development.</p>

<p>Therefore, given everything I have learned over the last 2 years: If I
were starting all over today, I would pick up a used Thinkpad (a X230
weighs approximately the same as the Chromebook, but with much
more storage, processing power, etc.) and build a workstation for more
intensive work.</p>

</div>

    
<footer class='entry-footer-container'>
  <div class='entry-footer'>
  <div class='categories'>
  <span class='taxonomyTerm-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
</span>
  <span class='screen-reader'>Categories: </span><a class='category' href='/categories/data-science'>data science</a></div>
<div class='tags'>
  <span class='taxonomyTerm-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
</span>
  <span class='screen-reader'>Tags: </span><a class='tag' href='/tags/'>Tags</a></div>

  </div>
</footer>


  </article>
  
<nav class='entry-nav-container'>
  <div class='entry-nav'><div class='prev-entry'>
      <a href='/post/cheap2/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader'>Previous post: </span>Data science on the cheap - pt. 2</a>
    </div></div>
</nav>

  
</main>

    <footer id='footer' class='footer-container'>
      <div class='footer'>
        <div class='social-menu-container'>
  <nav aria-label='Social Menu'>
    <ul class='social-menu'><li>
        <a href='https://github.com/mespe' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/MatthewEspe' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:mespe@ucdavis.edu' target='_blank' rel='noopener'>
          <span class='screen-reader'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/matthew-espe-a93a33149' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</div>
        <div class='copyright'>
  <p>
        
      

       &copy; 2017 Matt Espe 
  </p>
</div>

      </div>
    </footer>

  </div><script src='/assets/js/main.f29c93b9.js'></script><script src='/js/custom.js'></script></body>

</html>

