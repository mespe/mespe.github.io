<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="These are the slides from my presentation at the Colorado State University R Users Group on 4 Feb 2019
Good practices for working in R Guidelines, not rules Try to understand why you do each recommendation Know that you can break the rules Good, not best Best can be difficult to nail down Best depends on situation Obsession with &ldquo;best&rdquo; can interfere with the good Should you listen to me? &mldr; or anyone for that matter?"><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Good practices for working in R • Ten thousand words..."><meta property="og:description" content="These are the slides from my presentation at the Colorado State University R Users Group on 4 Feb 2019
Good practices for working in R Guidelines, not rules Try to understand why you do each recommendation Know that you can break the rules Good, not best Best can be difficult to nail down Best depends on situation Obsession with &ldquo;best&rdquo; can interfere with the good Should you listen to me? &mldr; or anyone for that matter?"><meta property="og:url" content="https://mespe.github.io/post/r_best_practice/"><meta property="og:site_name" content="Ten thousand words..."><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="R"><meta property="article:published_time" content="2019-02-04T16:16:50-06:00"><meta property="article:modified_time" content="2019-02-04T16:16:50-06:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.100.2"><title>Good practices for working in R • Ten thousand words...</title><link rel=canonical href=https://mespe.github.io/post/r_best_practice/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101069222-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class='page type-post has-sidebar'><div class=site><div id=sidebar class=sidebar><a class=screen-reader-text href=#main-menu>Skip to Main Menu</a><div class=container><section class='widget widget-about sep-after'><header><h2 class='title site-title'><a href=/>Ten thousand words...</a></h2><div class=desc>Thoughts on agriculture, data science, and academia</div></header></section><section class='widget widget-taxonomy_cloud sep-after'><header><h4 class='title widget-title'>Tags</h4></header><div class='container list-container'><ul class='list taxonomy-cloud'><li><a href=/tags/agriculture/ style=font-size:1.25em>agriculture</a></li><li><a href=/tags/blogging/ style=font-size:1em>blogging</a></li><li><a href=/tags/computers/ style=font-size:1.4166666666666665em>computers</a></li><li><a href=/tags/data-science/ style=font-size:1.9166666666666665em>data science</a></li><li><a href=/tags/golang/ style=font-size:1em>Golang</a></li><li><a href=/tags/health/ style=font-size:1em>health</a></li><li><a href=/tags/hugo/ style=font-size:1em>hugo</a></li><li><a href=/tags/personal/ style=font-size:1.0833333333333333em>personal</a></li><li><a href=/tags/r/ style=font-size:2em>R</a></li><li><a href=/tags/research/ style=font-size:1.0833333333333333em>research</a></li><li><a href=/tags/stan/ style=font-size:1em>Stan</a></li><li><a href=/tags/stats/ style=font-size:1.0833333333333333em>stats</a></li></ul></div></section></div><div class=sidebar-overlay></div></div><div class=main><nav id=main-menu class='menu main-menu' aria-label='Main Menu'><div class=container><a class=screen-reader-text href=#content>Skip to Content</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></span><span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></button><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/post/>Blog</a></li><li class=item><a href=/about/>About me</a></li><li class=item><a href=/research/>Research</a></li><li class=item><a href=/consulting/>Consulting</a></li><li class=item><a href=https://github.com/mespe>Repos</a></li><li class=item><a href=/docs/espe_cv.pdf>CV</a></li></ul></div></nav><div class=header-widgets><div class=container></div></div><header id=header class='header site-header'><div class='container sep-after'><div class=header-info><p class='site-title title'>Ten thousand words...</p><p class='desc site-desc'>Thoughts on agriculture, data science, and academia</p></div></div></header><main id=content><article lang=en class=entry><header class='header entry-header'><div class='container sep-after'><div class=header-info><h1 class=title>Good practices for working in R</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2019-02-04T16:16:50-06:00>2019, Feb 04</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>7 mins read</span></div></div></header><details class='container entry-toc'><summary class=title><span>Table of Contents</span></summary><nav id=TableOfContents><ul><li><a href=#good-practices-for-working-in-r>Good practices for working in R</a></li><li><a href=#should-you-listen-to-me>Should you listen to me?</a></li><li><a href=#goals-of-good-practices>Goals of good practices</a></li></ul><ul><li><a href=#organize-projects>Organize projects</a></li><li><a href=#example>Example</a></li><li><a href=#document-your-project>Document your project</a></li><li><a href=#use-version-control>Use version control</a></li><li><a href=#test-your-code>Test your code</a></li><li><a href=#share-early-and-often>Share early and often</a></li><li><a href=#use-a-capable-text-editor>Use a capable text editor</a></li><li><a href=#write-scripts>Write scripts</a></li><li><a href=#get-a-data-management-plan>Get a data management plan</a></li><li><a href=#resist-the-favor-of-the-moment>Resist the favor of the moment</a></li><li><a href=#clear-is-often-better-than-clever>Clear is often better than clever</a></li></ul><ul><li><a href=#follow-a-style>Follow a style</a></li><li><a href=#broken-style-is-difficult-to-read>Broken style is difficult to read</a></li><li><a href=#style-guides>Style guides</a></li><li><a href=#do-not-use-setwd>Do NOT use setwd()</a></li><li><a href=#instead-organize-by-project>Instead, organize by project</a></li><li><a href=#do-not-save-your-workspace>Do NOT save your workspace</a></li><li><a href=#comment-your-code-in-a-sane-way>Comment your code in a sane way</a></li><li><a href=#dont-reinvent-the-wheel---use-packages>Don&rsquo;t reinvent the wheel - use packages</a></li><li><a href=#treat-dependencies-as-liabilities>*Treat dependencies as liabilities</a></li><li><a href=#example-1>Example</a></li></ul><ul><li><a href=#1-script-header>1. Script header</a></li><li><a href=#2a-put-all-required-packages-in-one-place-at-the-top-of-the-script>2a. Put all required packages in one place at the top of the script</a></li><li><a href=#2b-do-not-install-packages-for-someone>2b. Do not install packages for someone!</a></li><li><a href=#3-set-variables-such-as-file-paths-options-etc-near-the-top>3. Set variables such as file paths, options, etc. near the top</a></li><li><a href=#3b-do-not-use-filechoose>3b. Do not use file.choose()</a></li><li><a href=#4-separate-sections-with-a-visual-break>4. Separate sections with a visual break</a></li><li><a href=#5-use-white-space>5. Use white space</a></li><li><a href=#6a-make-your-code-modular>6a. Make your code modular</a></li><li><a href=#6b-put-functions-in-separate-scripts>6b. Put functions in separate scripts</a></li><li><a href=#7-full-picture>7. Full picture</a></li></ul><ul><li><a href=#focus-on-why>Focus on why</a></li><li><a href=#keep-your-goals-in-mind>Keep your goals in mind</a></li><li><a href=#make-it-a-habit>Make it a habit</a></li></ul></nav></details><div class='container entry-content'><p>These are the slides from my presentation at the Colorado State University R Users Group on 4 Feb 2019</p><h2 id=good-practices-for-working-in-r>Good practices for working in R</h2><ul><li>Guidelines, not rules<ul><li>Try to understand <strong>why</strong> you do each recommendation</li><li>Know that you can break the rules</li></ul></li><li>Good, not best<ul><li>Best can be difficult to nail down</li><li>Best depends on situation</li><li>Obsession with &ldquo;best&rdquo; can interfere with the good</li></ul></li></ul><h2 id=should-you-listen-to-me>Should you listen to me?</h2><p>&mldr; or anyone for that matter?</p><p>R is a great community full of passionate people.</p><p>Many people are excited to share.</p><p>Unfortunately, there is gobs of bad advice floating around. Most R users are not programmers by training (including me*)</p><p>Focus on <em>why</em> you would do &lt;insert great advice here></p><h2 id=goals-of-good-practices>Goals of good practices</h2><p>In science, our work should be:</p><ul><li>Reproducible</li><li>Easy to maintain</li><li>Extensible</li></ul><p>Good practices help with all of these</p><p><strong>As a scientist, this is part of your job</strong></p><h1 id=general-advice-language-agnostic>General advice (language agnostic)</h1><h2 id=organize-projects>Organize projects</h2><p>Use directories to separate different elements of the analysis/workflow</p><p>Common directories are:</p><ul><li>data:</li><li>src: for compiled code</li><li>scripts/R: for R functions/scripts</li><li>docs: for documentation</li><li>tests: code to test your code</li><li>output/results: everything produced by scripts</li></ul><h2 id=example>Example</h2><pre tabindex=0><code>.
|- Ozone
    |-- data
    |-- docs
    |-- matlab
    |-- R
    |-- README.md
    |-- scripts
    |-- src
    |-- tests
    |-- TODO.md
</code></pre><h2 id=document-your-project>Document your project</h2><ul><li><p><em>Never</em> assume you will remember what you were doing.</p><ul><li>&ldquo;Your worst collaborator is <strong>you</strong> from 6 months ago.&rdquo;</li></ul></li><li><p>README gives overview of project, including major pieces</p></li><li><p>Other documentation: vignettes, getting started, etc.</p></li><li><p>Documenting functions: Say what the functions is for, not what it does</p><ul><li><code># my_function is for doing step X in this workflow</code></li><li>vs. <code># my function does X</code></li></ul></li></ul><h2 id=use-version-control>Use version control</h2><p>Git, SVN are most common</p><p>Allows a sane way to:</p><ul><li>Track changes</li><li>Collaborate</li><li>Maintain code</li></ul><h2 id=test-your-code>Test your code</h2><ul><li>Assume your code has bugs</li><li>Failing with error is your friend<ul><li>The worst error is the one you don&rsquo;t notice</li></ul></li></ul><h2 id=share-early-and-often>Share early and often</h2><p><em>Difficult</em>: you don&rsquo;t want to look foolish, dumb, etc.</p><ul><li>Code review/coding buddy</li><li>Sanity checks (related to testing)</li><li>Documentation</li></ul><h2 id=use-a-capable-text-editor>Use a capable text editor</h2><ul><li><p>Rstudio</p></li><li><p>Emacs</p></li><li><p>Vim</p></li><li><p>Sublime</p></li><li><p>Notepad++</p></li><li><p>Etc.</p></li><li><p>NOT:</p><ul><li>MS Word</li><li>Notepad</li></ul></li></ul><h2 id=write-scripts>Write scripts</h2><p>Never work only in the console</p><p>Every command should be reproducible</p><p>A script is:</p><ul><li>Documentation of what you did</li><li>Key to reproducing your work</li><li>More efficient</li></ul><h2 id=get-a-data-management-plan>Get a data management plan</h2><ul><li><p>Treat data as &ldquo;read only&rdquo;</p></li><li><p>Get a backup plan</p></li><li><p>Munge/fix data programmatically</p></li></ul><h2 id=resist-the-favor-of-the-moment>Resist the favor of the moment</h2><p>R has 10k+ packages on CRAN, Python has 170k+ - most of them are of limited use</p><p>Dependencies have a cost (talk more about this later)</p><p>Chasing the &ldquo;hot new thing&rdquo; can interfer with doing your work</p><h2 id=clear-is-often-better-than-clever>Clear is often better than clever</h2><p>~ Go Proverb</p><p>Your code has two purposes:</p><ul><li>doing some process</li><li>documenting that process</li></ul><p>&ldquo;Clever&rdquo; code can be difficult to understand, maintain, and share.</p><h1 id=r-advice>R advice</h1><h2 id=follow-a-style>Follow a style</h2><p>Having a consistent style makes it easier to:</p><ul><li>Read/understand the code</li><li>Find errors</li><li>Share with others</li></ul><h2 id=broken-style-is-difficult-to-read>Broken style is difficult to read</h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>var.1 <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>mean</span>(Var2)
</span></span><span style=display:flex><span>var_3<span style=color:#5bc4bf>&lt;-</span>var2<span style=color:#5bc4bf>*</span>var_1 <span style=color:#5bc4bf>-</span> var.2
</span></span><span style=display:flex><span><span style=color:#06b6ef>if</span>( Var1 <span style=color:#5bc4bf>&gt;=</span> var.3 ) <span style=color:#06b6ef>cat</span>(<span style=color:#48b685>&#34;Hi&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#06b6ef>if </span>(var.1 <span style=color:#5bc4bf>&lt;</span>var3)
</span></span><span style=display:flex><span>    <span style=color:#06b6ef>cat</span>(<span style=color:#48b685>&#34;This seems right&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#06b6ef>if</span>(var2 <span style=color:#5bc4bf>==</span>var_3){
</span></span><span style=display:flex><span>    <span style=color:#06b6ef>cat</span>(<span style=color:#48b685>&#39;something went wrong&#39;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=style-guides>Style guides</h2><p>Google: <a href=https://google.github.io/styleguide/Rguide.xml>https://google.github.io/styleguide/Rguide.xml</a></p><p>tidyverse: <a href=https://style.tidyverse.org/>https://style.tidyverse.org/</a></p><p>Hadley Wickham&rsquo;s: <a href=http://adv-r.had.co.nz/Style.html>http://adv-r.had.co.nz/Style.html</a></p><p><strong>The key is to be consistent.</strong></p><h2 id=do-not-use-setwd>Do NOT use setwd()</h2><ul><li>It is error prone</li><li>It is not transferable</li><li>It can alter someone else&rsquo;s computer, which is rude.</li></ul><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#776e71># Hope you have space here!</span>
</span></span><span style=display:flex><span><span style=color:#06b6ef>setwd</span>(<span style=color:#48b685>&#34;~/Documents&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#06b6ef>save</span>(huge_object, file <span style=color:#5bc4bf>=</span> <span style=color:#48b685>&#34;annoying.rda&#34;</span>)
</span></span></code></pre></div><h2 id=instead-organize-by-project>Instead, organize by project</h2><p>Assume the code will be run from a specific place in the project.</p><p>Make file paths relative to that.</p><p>Results in projects which can be transferred to new computer, people, etc.</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#06b6ef>source</span>(<span style=color:#48b685>&#34;R/my_funs.R&#34;</span>)
</span></span><span style=display:flex><span>df <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>read.csv</span>(<span style=color:#48b685>&#34;data/my_data.csv&#34;</span>)
</span></span></code></pre></div><h2 id=do-not-save-your-workspace>Do NOT save your workspace</h2><p>Encourages non-reproducible workflows</p><p>The script is <strong>real</strong>, the workspace is the product of the script</p><p>Assume everything in your workspace can go away in a moment&rsquo;s notice (and it will occasionally)</p><h2 id=comment-your-code-in-a-sane-way>Comment your code in a sane way</h2><p>Commenting every line is overkill (and distracting)</p><p>Never commenting your code is begging for trouble</p><p>Try to comment on sections, functions, and for operations which are atypical or not easily grasped.</p><p><em>Cite the original source for code you get from somewhere else</em></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#776e71># this is common and easy to understand - don&#39;t comment</span>
</span></span><span style=display:flex><span>df <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>read.csv</span>(<span style=color:#48b685>&#34;my_file.csv&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#776e71># it is not obvious why this is done - comment needed</span>
</span></span><span style=display:flex><span>df <span style=color:#5bc4bf>=</span> df[<span style=color:#f99b15>-10</span>,] 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#776e71># From https://...</span>
</span></span><span style=display:flex><span>brilliant_function <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>function</span>(x) <span style=color:#815ba4>...</span>
</span></span></code></pre></div><h2 id=dont-reinvent-the-wheel---use-packages>Don&rsquo;t reinvent the wheel - use packages</h2><p>R has many packages which are well-written and &ldquo;battle-tested&rdquo; - use them*</p><p>Code you write is code you own. You are responsible for:</p><ul><li>Testing</li><li>Maintenance</li></ul><h2 id=treat-dependencies-as-liabilities>*Treat dependencies as liabilities</h2><p>Every dependency is:</p><ul><li>code that can break your analysis.</li><li>code you need installed to run your analysis</li><li>a potential security risk</li><li><em>can</em> slow down R</li></ul><p>&ldquo;A little copying is better than a little dependency.&rdquo; - Go Proverb</p><p><strong>Copy with attribution - cite the source!</strong></p><h2 id=example-1>Example</h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>arm<span style=color:#5bc4bf>::</span>invlogit
</span></span></code></pre></div><pre tabindex=0><code>## function (x) 
## {
##     1/(1 + exp(-x))
## }
## &lt;bytecode: 0x555bae2653c0&gt;
## &lt;environment: namespace:arm&gt;
</code></pre><h1 id=organizing-a-script>Organizing a script:</h1><h2 id=1-script-header>1. Script header</h2><ol><li>Put important info at the very top of the script in a comment, such as</li></ol><ul><li>One line explanation of the purpose of the script</li><li>Your name</li><li>Date</li><li>Copyright, license</li></ul><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#776e71>## This script does something really impressive</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## M. Espe Feb 2019</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## License: GPL v3</span>
</span></span></code></pre></div><p>Provides a citation for others (and a string to search for)</p><h2 id=2a-put-all-required-packages-in-one-place-at-the-top-of-the-script>2a. Put all required packages in one place at the top of the script</h2><p>Allows people to easily see what packages they need to install.</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#06b6ef>library</span>(rstan)
</span></span><span style=display:flex><span><span style=color:#06b6ef>library</span>(ggplot2)
</span></span></code></pre></div><p><strong>Use <code>library()</code> not <code>require()</code> - <code>require()</code> fails silently</strong></p><h2 id=2b-do-not-install-packages-for-someone>2b. Do not install packages for someone!</h2><p>For example: Do NOT do this!</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#06b6ef>if</span>(<span style=color:#5bc4bf>!</span><span style=color:#06b6ef>require</span>(mypackage))
</span></span><span style=display:flex><span>    <span style=color:#06b6ef>install.packages</span>(<span style=color:#48b685>&#34;mypackage&#34;</span>)
</span></span></code></pre></div><p>Why not? It&rsquo;s rude to alter someone else&rsquo;s computer. Let them decide if, where, and how to install the package.</p><h2 id=3-set-variables-such-as-file-paths-options-etc-near-the-top>3. Set variables such as file paths, options, etc. near the top</h2><p>Putting these at the top of the script makes them easy to find and alter</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>data_path <span style=color:#5bc4bf>=</span> <span style=color:#48b685>&#34;data&#34;</span>
</span></span><span style=display:flex><span>data_file <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>file.path</span>(data_path, <span style=color:#48b685>&#34;data.csv&#34;</span>)
</span></span></code></pre></div><h2 id=3b-do-not-use-filechoose>3b. Do not use file.choose()</h2><p><code>file.choose()</code> requires a human behind the keyboard to make the choice.</p><p>You can (and will) forget which file you picked - hard-coded variables provide a record.</p><p>Reproducibility cannot depend on you being present</p><h2 id=4-separate-sections-with-a-visual-break>4. Separate sections with a visual break</h2><p>Makes it easy to quickly find pieces of the code</p><p>Can &ldquo;fold&rdquo; sections in some editors.</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#776e71>#----------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## Section 1</span>
</span></span><span style=display:flex><span>code here
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#776e71>#----------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Section 2</span>
</span></span></code></pre></div><h2 id=5-use-white-space>5. Use white space</h2><p>White space is ignored by the R parser, but not by humans</p><p>Breaking up code makes it more readable</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>x<span style=color:#5bc4bf>=</span><span style=color:#06b6ef>if</span>(<span style=color:#06b6ef>myfun</span>(a<span style=color:#5bc4bf>=</span>x,b<span style=color:#5bc4bf>=</span><span style=color:#f99b15>2</span>))y else b<span style=color:#5bc4bf>&gt;=</span><span style=color:#f99b15>1</span>
</span></span></code></pre></div><p>vs.</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>x <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>if </span>(<span style=color:#06b6ef>myfun</span>(a <span style=color:#5bc4bf>=</span> x, b <span style=color:#5bc4bf>=</span> <span style=color:#f99b15>2</span>)){
</span></span><span style=display:flex><span>        y
</span></span><span style=display:flex><span>    } else
</span></span><span style=display:flex><span>        b <span style=color:#5bc4bf>&gt;=</span> <span style=color:#f99b15>1</span>
</span></span></code></pre></div><h2 id=6a-make-your-code-modular>6a. Make your code modular</h2><p>Separate different parts of the analysis into separate scripts.</p><p>Makes code easier to maintain.</p><pre tabindex=0><code>|- scripts
  |-- munge_data.R
  |-- fit_model.R
  |-- plot_results.R
</code></pre><p>Can automate the task of updating pieces as needed</p><h2 id=6b-put-functions-in-separate-scripts>6b. Put functions in separate scripts</h2><p><code>funs.R</code></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>my_fun <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>function</span>(x){
</span></span><span style=display:flex><span>    <span style=color:#06b6ef>print</span>(x)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>script.R</code></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#06b6ef>source</span>(<span style=color:#48b685>&#34;R/funs.R&#34;</span>)
</span></span><span style=display:flex><span>a <span style=color:#5bc4bf>=</span> <span style=color:#f99b15>10</span>
</span></span><span style=display:flex><span><span style=color:#06b6ef>my_fun</span>(a)
</span></span></code></pre></div><h2 id=7-full-picture>7. Full picture</h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#776e71>## This script does something really impressive</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## M. Espe Feb 2019</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## License: GPL v3</span>
</span></span><span style=display:flex><span><span style=color:#06b6ef>library</span>(rstan)
</span></span><span style=display:flex><span><span style=color:#06b6ef>library</span>(ggplot2)
</span></span><span style=display:flex><span><span style=color:#06b6ef>source</span>(<span style=color:#48b685>&#34;R/my_funs.R&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data_path <span style=color:#5bc4bf>=</span> <span style=color:#48b685>&#34;data&#34;</span>
</span></span><span style=display:flex><span>data_file <span style=color:#5bc4bf>=</span> <span style=color:#06b6ef>file.path</span>(data_path, <span style=color:#48b685>&#34;data.csv&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#776e71>#----------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#776e71>## Section 1</span>
</span></span><span style=display:flex><span>code here
</span></span><span style=display:flex><span><span style=color:#776e71>#----------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Section 2</span>
</span></span></code></pre></div><h1 id=recap>Recap</h1><h2 id=focus-on-why>Focus on why</h2><p>Understanding the reasons behind recommendations allows you to alter or ignore them</p><p>Helps cut through the noise in the R community</p><p>Gives you a compass going forward</p><h2 id=keep-your-goals-in-mind>Keep your goals in mind</h2><p>It takes time and effort to do this stuff</p><p>It requires learning new skills and technologies</p><p><strong>Difficult to find motivation if you don&rsquo;t see these steps as part of doing science</strong></p><h2 id=make-it-a-habit>Make it a habit</h2><p>Practice will make these things second nature</p><p>Resist thinking &ldquo;I don&rsquo;t need to do it for this&mldr; it is not that important/I will never share this.&rdquo;</p><p>Don&rsquo;t be dogmatic - instead be mindful</p></div><footer class=entry-footer><div class='container sep-before'><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/r/>R</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/r/>R</a></div></div></footer></article><nav class=entry-nav><div class=container><div class='prev-entry sep-before'><a href=/post/power/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Retrospective Power Analysis</a></div><div class='next-entry sep-before'><a href=/post/workshops/><span class=screen-reader-text>Next post: </span>Why workshops are tough to teach<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class='container sep-before'><div class=copyright><p>&copy; 2017-2022 Matt Espe</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script></body></html>