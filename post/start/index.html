<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="UPDATE: The fine folks behind Hugo put together a nice guild that covers the steps involved in getting github pages and Hugo setup.
I thought I would write up my experiences starting a blog that uses R code but that does not use blogdown. Why do I not use blogdown? The short story is that blogdown does not seem quite ready to use, as it is missing some elements to make publishing a blog easy."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Creating an R blog with Hugo (without using blogdown) • Ten thousand words..."><meta property="og:description" content="UPDATE: The fine folks behind Hugo put together a nice guild that covers the steps involved in getting github pages and Hugo setup.
I thought I would write up my experiences starting a blog that uses R code but that does not use blogdown. Why do I not use blogdown? The short story is that blogdown does not seem quite ready to use, as it is missing some elements to make publishing a blog easy."><meta property="og:url" content="https://mespe.github.io/post/start/"><meta property="og:site_name" content="Ten thousand words..."><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="blogging"><meta property="article:tag" content="hugo"><meta property="article:published_time" content="2017-06-14T09:40:09-07:00"><meta property="article:modified_time" content="2017-06-14T09:40:09-07:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.100.2"><title>Creating an R blog with Hugo (without using blogdown) • Ten thousand words...</title><link rel=canonical href=https://mespe.github.io/post/start/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-101069222-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class='page type-post has-sidebar'><div class=site><div id=sidebar class=sidebar><a class=screen-reader-text href=#main-menu>Skip to Main Menu</a><div class=container><section class='widget widget-about sep-after'><header><h2 class='title site-title'><a href=/>Ten thousand words...</a></h2><div class=desc>Thoughts on agriculture, data science, and academia</div></header></section><section class='widget widget-taxonomy_cloud sep-after'><header><h4 class='title widget-title'>Tags</h4></header><div class='container list-container'><ul class='list taxonomy-cloud'><li><a href=/tags/agriculture/ style=font-size:1.25em>agriculture</a></li><li><a href=/tags/blogging/ style=font-size:1em>blogging</a></li><li><a href=/tags/computers/ style=font-size:1.4166666666666665em>computers</a></li><li><a href=/tags/data-science/ style=font-size:1.9166666666666665em>data science</a></li><li><a href=/tags/golang/ style=font-size:1em>Golang</a></li><li><a href=/tags/health/ style=font-size:1em>health</a></li><li><a href=/tags/hugo/ style=font-size:1em>hugo</a></li><li><a href=/tags/personal/ style=font-size:1.0833333333333333em>personal</a></li><li><a href=/tags/r/ style=font-size:2em>R</a></li><li><a href=/tags/research/ style=font-size:1.0833333333333333em>research</a></li><li><a href=/tags/stan/ style=font-size:1em>Stan</a></li><li><a href=/tags/stats/ style=font-size:1.0833333333333333em>stats</a></li></ul></div></section></div><div class=sidebar-overlay></div></div><div class=main><nav id=main-menu class='menu main-menu' aria-label='Main Menu'><div class=container><a class=screen-reader-text href=#content>Skip to Content</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></span><span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></button><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/post/>Blog</a></li><li class=item><a href=/about/>About me</a></li><li class=item><a href=/research/>Research</a></li><li class=item><a href=/consulting/>Consulting</a></li><li class=item><a href=https://github.com/mespe>Repos</a></li><li class=item><a href=/docs/espe_cv.pdf>CV</a></li></ul></div></nav><div class=header-widgets><div class=container></div></div><header id=header class='header site-header'><div class='container sep-after'><div class=header-info><p class='site-title title'>Ten thousand words...</p><p class='desc site-desc'>Thoughts on agriculture, data science, and academia</p></div></div></header><main id=content><article lang=en class=entry><header class='header entry-header'><div class='container sep-after'><div class=header-info><h1 class=title>Creating an R blog with Hugo (without using blogdown)</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2017-06-14T09:40:09-07:00>2017, Jun 14</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>3 mins read</span></div></div></header><div class='container entry-content'><p><em>UPDATE: The fine folks behind Hugo put together a <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>nice guild that
covers the steps involved in getting github pages and Hugo setup.</a></em></p><p>I thought I would write up my experiences starting a blog that uses R
code but that does not
use <a href=https://github.com/rstudio/blogdown>blogdown</a>. Why do I not use
blogdown? The short story is that blogdown does not seem quite ready to use,
as it is missing some elements to make publishing a blog easy.</p><p>The long story is that after
spending a good chunk of time helping a student navigate through using
blogdown, I found the approach below to be both easier to use and
simpler to implement. The
disadvantage of this approach is you have to step out of RStudio (which
I don&rsquo;t use anyway) and into the terminal.</p><p><em>DISCLAIMER: This is a work in progress - I am not big on writing
blogs, so please forgive me if this is not helpful.</em></p><h1 id=setup>Setup</h1><p>I recommend following the instructions here for simple setup and
deployment scripts. These have worked well for me.</p><p><a href=https://hjdskes.github.io/blog/update-deploying-hugo-on-personal-gh-pages/>UPDATE: DEPLOYING HUGO-GENERATED WEBSITES ON PERSONAL GITHUB PAGES</a></p><h1 id=using-r-code>Using R code</h1><p>This is where things get a little tricky. The biggest obstacle is that
when you knitr or Sweave a <code>.Rmd</code> to a <code>.md</code> file, the
figures (by default) are put in a folder in the working
directory. However, when hugo builds the static website, it moves
everything around. We need to do two things to prepare our R plots and
*.md files for hugo:</p><ol><li><p>We need to either create the plots in the <code>/static/</code> folder, or
move them there after knitting the <code>.Rmd</code></p></li><li><p>We need to make the file path in the <code>.md</code> file point to where
hugo will place the figures in the built website, not where they exist now.</p></li></ol><p>I found moving the images easier, though I suspect either will work. The steps are:</p><ol><li><p>Create the <code>.Rmd</code> file. Specify <code>fig.path='img/'</code> (the name of
this folder does not matter as long as it is consistent for each
step). For example:</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>```{r fig.path <span style=color:#5bc4bf>=</span> <span style=color:#48b685>&#34;img/&#34;</span>}
</span></span></code></pre></div></li></ol><p>plot(rnorm(100))</p><pre tabindex=0><code>~~~

2. knit the `.Rmd` file. Any figures will end up in a folder named
   `img/` in the current working directory.

3. Copy or move all the contents of `img/` to `{main
   website}/static/img`, where `{main website}` is the top-most
   directory of your website.

4. Change all references in the `.md` file from `img/*` to
   `/img/*`. The tricky thing is you want to do this **after** the
   `.md` file has been programmatically created, not in the `.Rmd`
   source file.
   
Easy, right? I did not want to do this for every single file I might produce, so I
put the whole thing under gnu make using some makefile magic.

`Makefile`
~~~makefile
POSTDIR := content/post
OBJS := $(shell find -name &#39;*.Rmd&#39;)
OUTFILES := $(patsubst %.Rmd,%.md,$(OBJS))
KNIT = Rscript -e &#34;library(knitr); knit(&#39;$&lt;&#39;)&#34;

all:$(OUTFILES)

$(OUTFILES):$(OBJS)
  $(KNIT); \
  cp -r img/* ../../static/img/; \
  sed -i &#39;s/img\//\/img\//g&#39; $(OUTFILES)

clean:
  rm $(OUTFILES)
~~~

This finds all the files with the `.Rmd` extension, and converts them
to `.md` files. It then uses `sed` to replace `img/` with `/img/`. You
will need to edit this to reflect your file structure (I have
my `.Rmd` files in `mespe.github.io/content/post/` so I need to
accend 2 directories to get to `static/`).

So, what does the resulting workflow look like?

1. Author a `.Rmd` file
2. Navigate to the correct folder and run `make all` in the terminal

That&#39;s it - no blogdown required.
</code></pre></div><footer class=entry-footer><div class='container sep-before'><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/blogging/>Blogging</a>, <a class=category href=/categories/hugo/>hugo</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/blogging/>blogging</a>, <a class=tag href=/tags/hugo/>hugo</a></div></div></footer></article><nav class=entry-nav><div class=container><div class='prev-entry sep-before'><a href=/post/intro/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Welcome</a></div><div class='next-entry sep-before'><a href=/post/new_v_old/><span class=screen-reader-text>Next post: </span>Moving past p-values<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class='container sep-before'><div class=copyright><p>&copy; 2017-2022 Matt Espe</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script></body></html>